<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduGames Brasil - MatemÃ¡tica Completa</title>
    <link rel="stylesheet" href="style-matematica-expandida.css">
</head>
<body>
    <div class="container">
        <header>
            <h1 id="math-title">ğŸ§® EduGames Brasil - MatemÃ¡tica ğŸ§®</h1>
            <p id="math-subtitle">Carregando...</p>
            <div class="game-nav">
                <button onclick="goHome()" class="nav-btn">ğŸ  InÃ­cio</button>
                <button onclick="exitGame()" class="nav-btn">ğŸšª Sair</button>
            </div>
        </header>

        <div class="age-selector hidden">
            <h2 id="content-title">ConteÃºdo MatemÃ¡tico:</h2>
        </div>

        <div id="game-area">
            <!-- NÃ­vel 10-14 anos -->
            <div id="intermediate-level" class="level-section hidden">
                <div class="game-modes">
                    <button id="fractions-mode" class="mode-btn active">ğŸ° FraÃ§Ãµes</button>
                    <button id="equations-mode" class="mode-btn">ğŸ“ EquaÃ§Ãµes</button>
                    <button id="geometry-mode" class="mode-btn">ğŸ“ Geometria</button>
                    <button id="review-btn-intermediate" class="mode-btn">ğŸ“š RevisÃ£o</button>
                </div>
            </div>

            <!-- NÃ­vel 15-18 anos -->
            <div id="advanced-level" class="level-section hidden">
                <div class="game-modes">
                    <button id="functions-mode" class="mode-btn active">ğŸ“ˆ FunÃ§Ãµes</button>
                    <button id="formulas-mode" class="mode-btn">ğŸ“ FÃ³rmulas</button>
                    <button id="financial-mode" class="mode-btn">ğŸ’° Mat. Financeira</button>
                    <button id="review-btn-advanced" class="review-btn">ğŸ“š RevisÃ£o</button>
                </div>
            </div>

            <!-- Ãrea do Problema -->
            <div class="problem-area">
                <div class="problem-display">
                    <div id="problem-text">2 + 3 = ?</div>
                    <div id="problem-visual"></div>
                    <div class="difficulty-info">NÃ­vel: <span id="current-level">1</span></div>
                </div>
                
                <div class="answer-section">
                    <div id="multiple-choice" class="hidden">
                        <!-- OpÃ§Ãµes de mÃºltipla escolha -->
                    </div>
                    
                    <div id="input-answer">
                        <input type="text" id="answer-input" placeholder="Sua resposta">
                        <button id="check-answer" class="btn-primary">âœ… Verificar</button>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button id="next-problem" class="btn-secondary">ğŸ¯ Novo Desafio</button>
                <button id="hint-btn" class="btn-secondary">ğŸ’¡ Dica</button>
            </div>

            <div class="stats-area">
                <div class="stat">Acertos: <span id="correct-count">0</span></div>
                <div class="stat">Total: <span id="total-count">0</span></div>
                <div class="stat">NÃ­vel: <span id="player-level">1</span></div>
                <div class="stat">SequÃªncia: <span id="streak">0</span> ğŸ”¥</div>
            </div>
            
            <div class="problem-counter">
                <span>Problema: <span id="current-problem">1</span>/<span id="total-problems">20</span></span>
            </div>
            
            <div style="text-align: center; margin-top: 20px; color: #718096; font-size: 0.9em;">
                <strong>Feito por Prof. Borges</strong>
            </div>
        </div>
        
        <!-- Tela de RevisÃ£o -->
        <div id="review-section" class="hidden">
            <div class="review-header">
                <h2>ğŸ“š RevisÃ£o de MatemÃ¡tica IntermediÃ¡ria</h2>
                <button id="back-to-game" class="btn-primary">â¬…ï¸ Voltar ao Jogo</button>
            </div>
            
            <div id="review-content" class="review-content" style="padding: 20px;">
                <div class="review-topic" style="margin-bottom: 25px; padding: 15px; background: #f7fafc; border-radius: 10px;">
                    <h3 style="color: #667eea;">ğŸ° FraÃ§Ãµes</h3>
                    <p><strong>DefiniÃ§Ã£o:</strong> FraÃ§Ã£o representa partes de um todo. O numerador (em cima) indica quantas partes temos, o denominador (embaixo) em quantas partes o todo foi dividido.</p>
                    <p><strong>Soma de fraÃ§Ãµes:</strong></p>
                    <p>â€¢ Denominadores iguais: some os numeradores</p>
                    <p>â€¢ Denominadores diferentes: encontre o MMC</p>
                    <p><strong>Exemplo:</strong> 1/4 + 2/4 = 3/4 | 1/2 + 1/3 = 3/6 + 2/6 = 5/6</p>
                </div>
                
                <div class="review-topic" style="margin-bottom: 25px; padding: 15px; background: #f0fff4; border-radius: 10px;">
                    <h3 style="color: #48bb78;">ğŸ“ EquaÃ§Ãµes do 1Âº Grau</h3>
                    <p><strong>Forma geral:</strong> ax + b = c (onde a â‰  0)</p>
                    <p><strong>MÃ©todo de resoluÃ§Ã£o:</strong></p>
                    <p>1. Isole os termos com x de um lado</p>
                    <p>2. Isole os nÃºmeros do outro lado</p>
                    <p>3. Divida pelo coeficiente de x</p>
                    <p><strong>Exemplo:</strong> 3x + 5 = 14 â†’ 3x = 14 - 5 â†’ 3x = 9 â†’ x = 3</p>
                </div>
                
                <div class="review-topic" style="margin-bottom: 25px; padding: 15px; background: #fffaf0; border-radius: 10px;">
                    <h3 style="color: #ed8936;">ğŸ“ Geometria Plana</h3>
                    <p><strong>RetÃ¢ngulo:</strong></p>
                    <p>â€¢ Ãrea = base Ã— altura</p>
                    <p>â€¢ PerÃ­metro = 2 Ã— (base + altura)</p>
                    <p><strong>Quadrado:</strong></p>
                    <p>â€¢ Ãrea = lado Ã— lado = ladoÂ²</p>
                    <p>â€¢ PerÃ­metro = 4 Ã— lado</p>
                    <p><strong>TriÃ¢ngulo:</strong></p>
                    <p>â€¢ Ãrea = (base Ã— altura) Ã· 2</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function goHome() {
            // Volta para seleÃ§Ã£o de jogos SEM limpar sessÃ£o
            window.location.href = 'index.html';
        }
        
        function exitGame() {
            // Limpa sessÃ£o e sai completamente
            localStorage.removeItem('edugames_session');
            localStorage.removeItem('studentName');
            localStorage.removeItem('studentAge');
            window.location.href = 'index.html';
        }
    </script>
    <!-- Controle Premium -->
    <script src="premium-control.js"></script>
    <script>
        // Verificar acesso premium antes de carregar o jogo
        document.addEventListener('DOMContentLoaded', () => {
            try {
                // Verificar se usuÃ¡rio tem premium
                const isPremium = window.premiumControl && window.premiumControl.isPremium;
                
                if (!isPremium || !window.premiumControl.canAccessGame('matematica-expandido')) {
                    // Bloquear acesso - mostrar modal premium
                    if (window.premiumControl) {
                        window.premiumControl.blockPremiumGame('MatemÃ¡tica Expandida');
                    } else {
                        alert('Este jogo estÃ¡ disponÃ­vel apenas na versÃ£o Premium!\n\nUpgrade agora por apenas R$ 4,99');
                    }
                    // Redirecionar apÃ³s 3 segundos
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 3000);
                    return;
                }
            } catch (error) {
                console.error('Erro ao verificar premium:', error);
                alert('Erro ao verificar acesso premium.');
                window.location.href = 'index.html';
            }
        });
    </script>
    <script src="script-matematica-expandido.js"></script>
</body>
</html>